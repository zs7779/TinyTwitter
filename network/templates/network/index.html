{% extends "network/layout.html" %}
{% load static %}

{% block body %}

<div id="project4" class="container">
    <div class="row justify-content-center ">
        <div class="col-6">
            <div class="my-2">
                <button class="btn btn-outline-primary btn-sm" type="button" v-on:click="getPosts">
                    <b-icon icon="arrow-clockwise"></b-icon>
                </button>
            </div>
            <post-feed v-bind:posts="posts" v-on:post-ok="getPosts">
                {% if request.user.is_authenticated %}
                <ul class="list-group-item"><new-post v-on:post-ok="getPosts">{% csrf_token %}</new-post></ul>
                {% endif %}
            </post-feed>
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        const endpoint_posts = "{% url 'posts' %}";
        const endpoint_post = "{% url 'post' %}";
        const endpoint_user = "{% url 'user' %}";
    </script>
    <script type="text/javascript" src="{% static 'network/index.js' %}"></script>
{% endblock %}